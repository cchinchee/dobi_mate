<nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">Dobi Mate</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <form class="navbar-form navbar-left">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
      </form>
      <ul class="nav navbar-nav navbar-right">

        <% if logged_in? %>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><%= current_user.name %> <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li class="nav navbar-nav navbar-right-item"><%= link_to 'Log out', users_log_out_path, class: "modal-btn navbar-right-1" %></li>

            <li><a href="#">Another action</a></li>
            <li><a href="#">Something else here</a></li>
            <li><a href="#">Separated link</a></li>
          </ul>
        </li>
        <% elsif shop_logged_in? %>
        

        <li class="nav navbar-nav navbar-right-item"><%= link_to "#{current_shop.shop_name}", shop_path(current_shop.id), class: "modal-btn navbar-right-1" %></li>
        <li class="nav navbar-nav navbar-right-item"><%= link_to 'Log out', shops_logout_path, class: "modal-btn navbar-right-1" %></li>
         
        <% else !logged_in? && !shop_logged_in? %>
        <li class="nav navbar-nav navbar-right-item"><a class="modal-btn navbar-right-1 addpointercursor" data-toggle="modal" data-target="#shoplogInModal">Business Login</a></li>
        <li class="nav navbar-nav navbar-right-item"><a class="modal-btn navbar-right-1 addpointercursor" data-toggle="modal" data-target="#signUpModalMain">Sign Up</a></li>
        <li><a class="modal-btn navbar-right-1 addpointercursor" data-toggle="modal" data-target="#logInModal">User Login</a></li>
        <% end  %>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


<!-- Modal sign up main-->
<div class="modal fade" id="signUpModalMain" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      
      <div class="modal-body">
        <div class="modal-close">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close" aria-hidden="true">&times;</button>
        </div>
        <div class="modal-container">
          <a class="modal-btn btn btn-signup" id="facebook-text" onclick="window.location.href='/auth/facebook'">
            <svg viewBox="0 0 32 32" aria-hidden="true" focusable="false" style="height: 18px; width: 18px; display: inline; margin-right:5px; fill: currentcolor;"><path d="m8 14.41v-4.17c0-.42.35-.81.77-.81h2.52v-2.08c0-4.84 2.48-7.31 7.42-7.35 1.65 0 3.22.21 4.69.64.46.14.63.42.6.88l-.56 4.06c-.04.18-.14.35-.32.53-.21.11-.42.18-.63.14-.88-.25-1.78-.35-2.8-.35-1.4 0-1.61.28-1.61 1.73v1.8h4.52c.42 0 .81.42.81.88l-.35 4.17c0 .42-.35.71-.77.71h-4.21v16c0 .42-.35.81-.77.81h-5.21c-.42 0-.8-.39-.8-.81v-16h-2.52a.78.78 0 0 1 -.78-.78" fill-rule="evenodd"></path></svg>
            
              <span>Sign up with Facebook</span>
            
          </a>
        </div>
        <div class="modal-container">
          <a class="modal-btn btn btn-signup" id="google-text" onclick="window.location.href='/auth/google_oauth2'" >
            <svg viewBox="0 0 18 18" role="presentation" aria-hidden="true" focusable="false" style="height:18px; width: 18px; display:inline; margin-right:5px" >
              <g fill="none" fill-rule="evenodd">
                <path d="M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z" fill="#EA4335"></path>
                <path d="M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z" fill="#4285F4"></path>
                <path d="M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z" fill="#FBBC05"></path>
                <path d="M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z" fill="#34A853"></path>
                <path d="M0 0h18v18H0V0z"></path>
               </g>
             </svg>
             
              <span>Sign up with Google</span>
              
          </a>
        </div>

        <hr class="hr-text" data-content="or">

        <div class="modal-container">
          <a class="modal-btn btn btn-signup" data-toggle="modal" data-dismiss="modal" data-target="#signUpModal">
            <svg viewBox="0 0 24 24" role="presentation" aria-hidden="true" focusable="false" style="height: 18px; width: 18px; display: inline; margin-right:5px; fill: currentcolor;">
              
              <path d="m22.5 4h-21c-.83 0-1.5.67-1.5 1.51v12.99c0 .83.67 1.5 1.5 1.5h20.99a1.5 1.5 0 0 0 1.51-1.51v-12.98c0-.84-.67-1.51-1.5-1.51zm.5 14.2-6.14-7.91 6.14-4.66v12.58zm-.83-13.2-9.69 7.36c-.26.2-.72.2-.98 0l-9.67-7.36h20.35zm-21.17.63 6.14 4.67-6.14 7.88zm.63 13.37 6.3-8.1 2.97 2.26c.62.47 1.57.47 2.19 0l2.97-2.26 6.29 8.1z" fill-rule="evenodd"></path>

            </svg>
            
              <span>Sign up with Email</span>
          </a>


            <hr class="footer-hr">
            <h4 class="modal-footer-content text-center">Already have an account? <a href="#" data-toggle="modal" data-dismiss="modal" data-target="#logInModal" class="login-text">Log In</a></h4>
          
        </div>
      </div>

    </div>
  </div>
</div>

<!-- Modal sign up -->
<div class="modal fade" id="signUpModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div class="modal-close" id="modal-header-social">
          
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
          <p>You may sign up with <%= link_to "Facebook", "/auth/facebook" %> or <%= link_to "Google", "/auth/google_oauth2" %></p>
            <hr class="hr-text" data-content="or">                
          
        <div class="modal-form">
        <%= render partial: '/users/form' %>

        </div>
      </div>
    </div>
  </div>
</div>

<!-- User log in modal -->

<div class="modal fade text-center" id="logInModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3>Login to continue</h3>
      </div>
      
      <div class="modal-body">
          <div class="form-group ">
           
            <%= form_for :session, url: users_login_path do |form| %>
              <div class="text-field form-group">
                <%= form.text_field :email, type: 'email', placeholder: "Email Address", class: "form-control" %>
              </div>

              <div class="password-field form-group">
                <%= form.password_field :password, placeholder: "Create a Password", class: "form-control" %>
              </div>

              <div class="submit-field form-group" >
                <%= form.submit 'Log In', class: "form-control form-group-submit" %>
              </div>
              <a class="modal-btn" data-toggle="modal" data-dismiss="modal" data-target="#forgotPasswordModal">Forgot password?</a>
            <% end %>
            
            <hr class="hr-text" data-content="or continue with">
            
              <div class="social-login row text-center">    
                <div class='social-login-seperator col-md-6'>
                  <a href="/auth/facebook" class="social-login-icon">
                    <svg viewBox="0 0 32 32" aria-hidden="true" focusable="false" style="height: 18px; width: 18px; display: inline; margin-right:5px; fill: currentcolor;"><path d="m8 14.41v-4.17c0-.42.35-.81.77-.81h2.52v-2.08c0-4.84 2.48-7.31 7.42-7.35 1.65 0 3.22.21 4.69.64.46.14.63.42.6.88l-.56 4.06c-.04.18-.14.35-.32.53-.21.11-.42.18-.63.14-.88-.25-1.78-.35-2.8-.35-1.4 0-1.61.28-1.61 1.73v1.8h4.52c.42 0 .81.42.81.88l-.35 4.17c0 .42-.35.71-.77.71h-4.21v16c0 .42-.35.81-.77.81h-5.21c-.42 0-.8-.39-.8-.81v-16h-2.52a.78.78 0 0 1 -.78-.78" fill-rule="evenodd"></path></svg>


                   Facebook </a>
                </div>
                <div class='social-login-seperator col-md-6'>
                  <a href="/auth/google_oauth2" class="social-login-icon text-center">
                    <svg viewBox="0 0 18 18" role="presentation" aria-hidden="true" focusable="false" style="height:18px; width: 18px; display:inline; margin-right:5px" >
                      <g fill="none" fill-rule="evenodd">
                        <path d="M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z" fill="#EA4335"></path>
                        <path d="M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z" fill="#4285F4"></path>
                        <path d="M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z" fill="#FBBC05"></path>
                        <path d="M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z" fill="#34A853"></path>
                        <path d="M0 0h18v18H0V0z"></path>
                       </g>
                     </svg>   


                    Google
                  </a>
                </div>
              </div> 
            
          </div>
      </div>

      <div class="modal-footer">
        <h4 class="modal-footer-content text-center">Don't have an account? <a class="modal-btn" data-toggle="modal" data-dismiss="modal" data-target="#signUpModalMain">Sign Up</a></h4>
      </div>
    </div>
  </div>
</div>

<!-- shop login modal -->

<div class="modal fade text-center" id="shoplogInModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h3>Business Login to continue</h3>
        
      </div>
      
      <div class="modal-body">
          <div class="form-group ">
           

            <%= form_for :session, url: shops_login_path do |form| %>
              <div class="text-field form-group">
                <%= form.text_field :email, type: 'email', placeholder: "Email Address", class: "form-control" %>
              </div>

              <div class="password-field form-group">
                <%= form.password_field :password, placeholder: "Create a Password", class: "form-control" %>
              </div>

              <div class="submit-field form-group" >
                <%= form.submit 'Log In', class: "form-control form-group-submit" %>
              </div>
              
            <% end %>

          </div>
      </div>
    </div>
  </div> 
</div>         
